# Migration `20210104044629-major-primary-key`

This migration has been generated by Mitch Gamburg at 1/3/2021, 11:46:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "majors" DROP CONSTRAINT "majors_pkey",
DROP COLUMN "id",
ALTER COLUMN "major_id" SET NOT NULL,
ALTER COLUMN "year_version" SET NOT NULL,
ADD PRIMARY KEY ("year_version", "major_id")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210104000650-update-major-model..20210104044629-major-primary-key
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Course {
   classAttributes String[]         @map(name: "class_attributes")
@@ -55,15 +55,15 @@
   @@id([userId, sectionId])
 }
 model Major {
-  yearVersion  String? @map(name: "year_version")
-  id           Int     @default(autoincrement()) @id
-  majorId      String? @map(name: "major_id")
-  plansOfStudy Json    @map(name: "plans_of_study")
+  yearVersion  String @map(name: "year_version")
+  majorId      String @map(name: "major_id")
+  plansOfStudy Json   @map(name: "plans_of_study")
   spec         Json
   @@map(name: "majors")
+  @@id([yearVersion, majorId])
 }
 model Professor {
   bigPictureUrl     String?  @map(name: "big_picture_url")
```


